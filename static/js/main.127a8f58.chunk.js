(this["webpackJsonpfront-end"]=this["webpackJsonpfront-end"]||[]).push([[0],{232:function(e){e.exports=JSON.parse('["mask","no_mask"]')},333:function(e,t,n){},338:function(e,t,n){},344:function(e,t){},345:function(e,t){},353:function(e,t){},363:function(e,t){},364:function(e,t){},365:function(e,t){},366:function(e,t){},374:function(e,t){},375:function(e,t,n){},376:function(e,t,n){},377:function(e,t,n){"use strict";n.r(t);var c=n(27),a=n(273),s=n.n(a),i=n(4),r=n(85),o=n(274),l=(n(333),n(26)),d=function(e){var t=Object(c.useState)(!1),n=Object(i.a)(t,2),a=n[0],s=n[1],d=Object(c.useState)(!0),u=Object(i.a)(d,2),j=(u[0],u[1]),b=function(){return s(!1)},m=function(){window.innerWidth<=960?j(!1):j(!0)};return Object(c.useEffect)((function(){m()}),[]),window.addEventListener("resize",m),Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)("nav",{className:"navbar",children:[Object(l.jsxs)("div",{className:"navbar-container",children:[Object(l.jsx)(r.b,{to:"/",className:"navbar-logo",onClick:b,children:Object(l.jsx)("i",{className:"fas fa-head-side-mask"})}),Object(l.jsx)("div",{className:"menu-icon",onClick:function(){return s(!a)},children:Object(l.jsx)("i",{className:a?"fas fa-times":"fas fa-bars"})}),Object(l.jsxs)("ul",{className:a?"nav-menu active":"nav-menu",children:[Object(l.jsx)("li",{className:"nav-item",children:Object(l.jsx)(r.b,{to:"/",className:"nav-links",onClick:b,children:"About"})}),Object(l.jsx)("li",{className:"nav-item",children:Object(l.jsx)(r.b,{to:"/model#",className:"nav-links",onClick:b,children:"Live"})}),Object(l.jsx)("li",{className:"nav-item",children:Object(l.jsx)(o.a,{to:"/model#image",className:"nav-links",onClick:b,children:"Image"})})]})]}),e.isModelLoading?Object(l.jsx)("div",{className:"loader-container",children:Object(l.jsx)("p",{children:"Loading model"})}):null]})})},u=(n(338),function(){return Object(l.jsxs)("div",{style:{height:"100vh",backgroundColor:"#2d3748"},children:[Object(l.jsx)("div",{className:"hero-container",children:Object(l.jsx)("video",{src:"videos/video-2.mp4",autoPlay:!0,loop:!0,muted:!0,className:"hero-video"})}),Object(l.jsxs)("div",{className:"about-container",children:[Object(l.jsx)("div",{className:"title",children:"About the Model"}),Object(l.jsxs)("ul",{className:"body",children:[Object(l.jsx)("li",{children:"This computer vision model was trained to detect and classify whether a human is wearing a mask or not with bounding box annotations"}),Object(l.jsx)("li",{children:"As such, the model contains two classes: mask and no_mask. Each prediction is displayed with it's corresponding confidence threshold [25%-100%]"}),Object(l.jsx)("li",{children:"Trained on the YoloV5 architecture using transfer learning from the YoloV5s model"}),Object(l.jsx)("li",{children:"Trained via Google Colab using a P100 GPU taking 3.5 hours"}),Object(l.jsx)("li",{children:"Trained on over 2,700 images containing over 3,000 annotations"}),Object(l.jsx)("li",{children:"Model was tested on 680 validation images that were withheld from the training set"}),Object(l.jsx)("li",{children:"Achieved 88% precision and 89% recall when tested on the validation images"})]}),Object(l.jsx)("div",{className:"about-btn-container",children:Object(l.jsx)(r.b,{to:"/model",children:Object(l.jsx)("button",{className:"about-btn",children:"Test the model"})})})]})]})}),j=n(5),b=n.n(j),m=n(11),h=n(67),f=(n(208),n(232));n(375);h.c();var O=function(e){var t=Object(c.useState)(null),n=Object(i.a)(t,2),a=n[0],s=n[1],r=Object(c.useState)("close"),o=Object(i.a)(r,2),d=o[0],u=o[1],j=Object(c.useState)("close"),O=Object(i.a)(j,2),v=O[0],p=O[1],x=Object(c.useState)(0),g=Object(i.a)(x,2),w=g[0],y=g[1],N=Object(c.useState)(0),k=Object(i.a)(N,2),S=k[0],C=k[1],L=Object(c.useState)({state:"loading",progress:0}),R=Object(i.a)(L,2),T=R[0],A=R[1],M=Object(c.useState)(null),I=Object(i.a)(M,2),W=I[0],P=I[1],U=Object(c.useRef)(null),E=Object(c.useRef)(null),F=Object(c.useRef)(null),_=Object(c.useRef)(null),B=Object(c.useRef)(null),D=function(){F.current.srcObject?(F.current.srcObject=null,window.localStream.getTracks().forEach((function(e){e.stop()})),u("close")):alert("Please open Webcam first!")},z=function(e,t,n){var c=_.current.getContext("2d");c.clearRect(0,0,c.canvas.width,c.canvas.height);var a="16px sans-serif";c.font=a,c.textBaseline="top";for(var s=0;s<t.length;++s)if(t[s]>.25){var r=f[n[s]],o=(100*t[s]).toFixed(1),l=e.slice(4*s,4*(s+1)),d=Object(i.a)(l,4),u=d[0],j=d[1],b=d[2],m=d[3];u*=_.current.width,b*=_.current.width,j*=_.current.height;var h=b-u,O=(m*=_.current.height)-j,v="no_mask"==r?"#fc031c":"#03fc0b";c.strokeStyle=v,c.lineWidth=2,c.strokeRect(u,j,h,O),c.fillStyle=v;var p=c.measureText(r+" - "+o+"%").width,x=parseInt(a,10);c.fillRect(u-1,j-(x+2),p+2,x+2),c.fillStyle="#ffffff",c.fillText(r+" - "+o+"%",u-1,j-(x+2))}},J=function(e,t,n){var c=B.current.getContext("2d");c.clearRect(0,0,c.canvas.width,c.canvas.height);var a="16px sans-serif";c.font=a,c.textBaseline="top";for(var s=0;s<t.length;++s)if(t[s]>.25){var r=f[n[s]],o=(100*t[s]).toFixed(1),l=e.slice(4*s,4*(s+1)),d=Object(i.a)(l,4),u=d[0],j=d[1],b=d[2],m=d[3];u*=B.current.width,b*=B.current.width,j*=B.current.height;var h=b-u,O=(m*=B.current.height)-j,v="no_mask"==r?"#fc031c":"#03fc0b";c.strokeStyle=v,c.lineWidth=2,c.strokeRect(u,j,h,O),c.fillStyle=v;var p=c.measureText(r+" - "+o+"%").width,x=parseInt(a,10);c.fillRect(u-1,j-(x+2),p+2,x+2),c.fillStyle="#ffffff",c.fillText(r+" - "+o+"%",u-1,j-(x+2))}},G=function(){var e=Object(m.a)(b.a.mark((function e(){var t,n,c,s,r,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!F.current.srcObject){e.next=9;break}return h.d().startScope(),t=a.inputs[0].shape.slice(1,3),n=Object(i.a)(t,2),c=n[0],s=n[1],r=h.h((function(){return h.e.resizeBilinear(h.a.fromPixels(F.current),[c,s]).div(255).expandDims(0)})),e.next=6,a.executeAsync(r).then((function(e){var t=e.slice(0,3),n=Object(i.a)(t,3),c=n[0],a=n[1],s=n[2],r=c.dataSync(),o=a.dataSync(),l=s.dataSync();z(r,o,l),h.b(e)}));case 6:o=requestAnimationFrame(G),P(o),h.d().endScope();case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=Object(m.a)(b.a.mark((function e(){var t,n,c,s,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h.d().startScope(),t=a.inputs[0].shape.slice(1,3),n=Object(i.a)(t,2),c=n[0],s=n[1],r=h.h((function(){return h.e.resizeBilinear(h.a.fromPixels(E.current),[c,s]).div(255).expandDims(0)})),e.next=5,a.executeAsync(r).then((function(e){var t=e.slice(0,3),n=Object(i.a)(t,3),c=n[0],a=n[1],s=n[2],r=c.dataSync(),o=a.dataSync(),l=s.dataSync();J(r,o,l),h.b(e)}));case 5:h.d().endScope();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){e.setModelLoadingOn(),A({state:"loading",progress:0}),h.f("face-mask-model_web_model/model.json",{onProgress:function(e){A({state:"loading",progress:e})}}).then(function(){var t=Object(m.a)(b.a.mark((function t(n){var c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=h.g(n.inputs[0].shape),t.next=3,n.executeAsync(c).then((function(t){h.b(t),h.b(c),s(n),e.setModelLoadingOff(),A({state:"ready",progress:1}),console.log("model loaded")}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),[]),Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("div",{className:"Live",style:e.isModelLoading?{marginTop:"40px"}:{marginTop:"20px"},children:[Object(l.jsx)("div",{className:"title",id:"live",children:"Webcam"}),Object(l.jsx)("ul",{className:"webcam-ul",children:Object(l.jsx)("li",{children:"Test the model with your device's webcam"})}),Object(l.jsxs)("div",{className:"content",children:[Object(l.jsxs)("div",{className:"main",children:[Object(l.jsx)("video",{style:{display:"open"===d?"block":"none"},autoPlay:!0,playsInline:!0,muted:!0,ref:F,className:"main-video"}),Object(l.jsx)("canvas",{width:640,height:360,style:{display:"open"===d?"block":"none"},ref:_,className:"main-canvas"}),Object(l.jsx)("img",{width:360,height:360,className:"temp-img",style:{display:"open"===d?"none":"block"},src:"temp-webcam-img.jpg"})]}),Object(l.jsx)("div",{className:"btnWrapper",children:Object(l.jsxs)("button",{className:"open"===d?"active":"nonActive",onClick:function(){"close"===d?navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"environment"}}).then((function(e){window.localStream=e,F.current.srcObject=e,u("open"),F.current.onloadedmetadata=function(){G()}})):alert("Can't open Webcam!"):(cancelAnimationFrame(W),P(null),D())},disabled:"ready"!==T.state,children:["open"===d?"Close":"Activate"," Webcam"]})})]})]}),Object(l.jsxs)("div",{className:"image-container",id:"image",children:[Object(l.jsx)("div",{className:"title",children:"Image"}),Object(l.jsxs)("ul",{className:"webcam-ul",children:[Object(l.jsx)("li",{children:"Test the model out on an image from your system"}),Object(l.jsx)("li",{children:Object(l.jsx)("em",{children:"Webcam must be closed when predicting on an image"})})]}),Object(l.jsxs)("div",{className:"content",children:[Object(l.jsx)("img",{style:{display:"open"===v?"block":"none"},ref:E,className:"main-img"}),Object(l.jsx)("canvas",{style:{display:"open"===v?"block":"none"},width:w,height:S,ref:B,className:"main-canvas-img"}),Object(l.jsx)("img",{width:360,height:360,className:"temp-img",style:{display:"open"===v?"none":"block"},src:"temp-picture-img.jpg"}),Object(l.jsxs)("div",{className:"btnWrapper",children:[Object(l.jsx)("input",{type:"file",ref:U,accept:"image/*",style:{display:"none"},onChange:function(e){if(console.log("image opened"),null!==e.target.files[0]&&0!==e.target.files.length){var t=e.target.files[0],n=window.URL.createObjectURL(t);E.current.src=n,p("open"),E.current.onload=function(){y(E.current.width),C(E.current.height),V(),window.URL.revokeObjectURL(n)}}}}),Object(l.jsxs)("button",{className:"nonActive",disabled:"ready"!==T.state,onClick:function(){"open"===d&&D(),U.current.click()},children:["open"===v?"New":"Upload"," Image"]}),"open"===v?Object(l.jsx)("button",{className:"closeImage",onClick:function(){E.current.src?(E.current.src=null,p("close")):alert("No Image to close")},children:"Close Image"}):null]})]})]}),Object(l.jsx)("div",{className:"rest"})]})},v=n(44),p=(n(376),function(){var e=Object(c.useState)(!1),t=Object(i.a)(e,2),n=t[0],a=t[1];return Object(l.jsxs)("div",{className:"App",id:"about",children:[Object(l.jsx)(d,{isModelLoading:n}),Object(l.jsxs)(v.c,{children:[Object(l.jsx)(v.a,{path:"/",element:Object(l.jsx)(u,{})}),Object(l.jsx)(v.a,{path:"/model",element:Object(l.jsx)(O,{isModelLoading:n,setModelLoadingOn:function(){a(!0)},setModelLoadingOff:function(){a(!1)}})})]})]})});s.a.render(Object(l.jsx)(r.a,{children:Object(l.jsx)(p,{})}),document.getElementById("root"))}},[[377,1,2]]]);
//# sourceMappingURL=main.127a8f58.chunk.js.map