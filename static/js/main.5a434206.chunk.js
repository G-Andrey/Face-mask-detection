(this["webpackJsonpfront-end"]=this["webpackJsonpfront-end"]||[]).push([[0],{231:function(e){e.exports=JSON.parse('["mask","no_mask"]')},332:function(e,t,n){},334:function(e,t,n){},340:function(e,t){},341:function(e,t){},349:function(e,t){},359:function(e,t){},360:function(e,t){},361:function(e,t){},362:function(e,t){},370:function(e,t){},371:function(e,t,n){},372:function(e,t,n){},373:function(e,t,n){"use strict";n.r(t);var c=n(29),a=n(272),s=n.n(a),i=n(4),r=(n(332),n(26)),o=function(e){var t=Object(c.useState)(!1),n=Object(i.a)(t,2),a=n[0],s=n[1],o=Object(c.useState)(!0),l=Object(i.a)(o,2),d=(l[0],l[1]),j=function(){return s(!1)},u=function(){window.innerWidth<=960?d(!1):d(!0)};return Object(c.useEffect)((function(){u()}),[]),window.addEventListener("resize",u),Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("nav",{className:"navbar",children:[Object(r.jsxs)("div",{className:"navbar-container",children:[Object(r.jsx)("a",{href:"/",className:"navbar-logo",onClick:j,children:Object(r.jsx)("i",{className:"fas fa-head-side-mask"})}),Object(r.jsx)("div",{className:"menu-icon",onClick:function(){return s(!a)},children:Object(r.jsx)("i",{className:a?"fas fa-times":"fas fa-bars"})}),Object(r.jsxs)("ul",{className:a?"nav-menu active":"nav-menu",children:[Object(r.jsx)("li",{className:"nav-item",children:Object(r.jsx)("a",{href:"/",className:"nav-links",onClick:j,children:"About"})}),Object(r.jsx)("li",{className:"nav-item",children:Object(r.jsx)("a",{href:"/model#",className:"nav-links",onClick:j,children:"Live"})}),Object(r.jsx)("li",{className:"nav-item",children:Object(r.jsx)("a",{href:"/model#image",className:"nav-links",onClick:j,children:"Image"})})]})]}),e.isModelLoading?Object(r.jsx)("div",{className:"loader-container",children:Object(r.jsx)("p",{children:"Loading model"})}):null]})})},l=(n(334),function(){return Object(r.jsxs)("div",{style:{height:"100vh",backgroundColor:"#2d3748"},children:[Object(r.jsx)("div",{className:"hero-container",children:Object(r.jsx)("video",{src:"/videos/video-2.mp4",autoPlay:!0,loop:!0,muted:!0,className:"hero-video"})}),Object(r.jsxs)("div",{className:"about-container",children:[Object(r.jsx)("div",{className:"title",children:"About the Model"}),Object(r.jsxs)("ul",{className:"body",children:[Object(r.jsx)("li",{children:"This computer vision model was trained to detect and classify whether a human is wearing a mask or not with bounding box annotations"}),Object(r.jsx)("li",{children:"As such, the model contains two classes: mask and no_mask. Each prediction is displayed with it's corresponding confidence threshold [25%-100%]"}),Object(r.jsx)("li",{children:"Trained on the YoloV5 architecture using transfer learning from the YoloV5s model"}),Object(r.jsx)("li",{children:"Trained via Google Colab using a P100 GPU taking 3.5 hours"}),Object(r.jsx)("li",{children:"Trained on over 2,700 images containing over 3,000 annotations"}),Object(r.jsx)("li",{children:"Model was tested on 680 validation images that were withheld from the training set"}),Object(r.jsx)("li",{children:"Achieved 88% precision and 89% recall when tested on the validation images"})]}),Object(r.jsx)("div",{className:"about-btn-container",children:Object(r.jsx)("a",{href:"/model",children:Object(r.jsx)("button",{className:"about-btn",children:"Test the model"})})})]})]})}),d=n(5),j=n.n(d),u=n(11),b=n(67),m=(n(207),n(231));n(371);b.c();var h=function(e){var t=Object(c.useState)(null),n=Object(i.a)(t,2),a=n[0],s=n[1],o=Object(c.useState)("close"),l=Object(i.a)(o,2),d=l[0],h=l[1],f=Object(c.useState)("close"),O=Object(i.a)(f,2),v=O[0],p=O[1],x=Object(c.useState)("close"),g=Object(i.a)(x,2),w=(g[0],g[1],Object(c.useState)({state:"loading",progress:0})),y=Object(i.a)(w,2),N=y[0],k=y[1],S=Object(c.useState)(null),C=Object(i.a)(S,2),L=C[0],R=C[1],T=Object(c.useRef)(null),A=Object(c.useRef)(null),M=Object(c.useRef)(null),I=Object(c.useRef)(null),W=Object(c.useRef)(null),P=function(){M.current.srcObject?(M.current.srcObject=null,window.localStream.getTracks().forEach((function(e){e.stop()})),h("close")):alert("Please open Webcam first!")},U=function(e,t,n){var c=I.current.getContext("2d");c.clearRect(0,0,c.canvas.width,c.canvas.height);var a="16px sans-serif";c.font=a,c.textBaseline="top";for(var s=0;s<t.length;++s)if(t[s]>.25){var r=m[n[s]],o=(100*t[s]).toFixed(1),l=e.slice(4*s,4*(s+1)),d=Object(i.a)(l,4),j=d[0],u=d[1],b=d[2],h=d[3];j*=I.current.width,b*=I.current.width,u*=I.current.height;var f=b-j,O=(h*=I.current.height)-u,v="no_mask"==r?"#fc031c":"#03fc0b";c.strokeStyle=v,c.lineWidth=2,c.strokeRect(j,u,f,O),c.fillStyle=v;var p=c.measureText(r+" - "+o+"%").width,x=parseInt(a,10);c.fillRect(j-1,u-(x+2),p+2,x+2),c.fillStyle="#ffffff",c.fillText(r+" - "+o+"%",j-1,u-(x+2))}},E=function(e,t,n){var c=W.current.getContext("2d");c.clearRect(0,0,c.canvas.width,c.canvas.height);var a="16px sans-serif";c.font=a,c.textBaseline="top";for(var s=0;s<t.length;++s)if(t[s]>.25){var r=m[n[s]],o=(100*t[s]).toFixed(1),l=e.slice(4*s,4*(s+1)),d=Object(i.a)(l,4),j=d[0],u=d[1],b=d[2],h=d[3];j*=W.current.width,b*=W.current.width,u*=W.current.height;var f=b-j,O=(h*=W.current.height)-u,v="no_mask"==r?"#fc031c":"#03fc0b";c.strokeStyle=v,c.lineWidth=2,c.strokeRect(j,u,f,O),c.fillStyle=v;var p=c.measureText(r+" - "+o+"%").width,x=parseInt(a,10);c.fillRect(j-1,u-(x+2),p+2,x+2),c.fillStyle="#ffffff",c.fillText(r+" - "+o+"%",j-1,u-(x+2))}},F=function(){var e=Object(u.a)(j.a.mark((function e(){var t,n,c,s,r,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!M.current.srcObject){e.next=9;break}return b.d().startScope(),t=a.inputs[0].shape.slice(1,3),n=Object(i.a)(t,2),c=n[0],s=n[1],r=b.h((function(){return b.e.resizeBilinear(b.a.fromPixels(M.current),[c,s]).div(255).expandDims(0)})),e.next=6,a.executeAsync(r).then((function(e){var t=e.slice(0,3),n=Object(i.a)(t,3),c=n[0],a=n[1],s=n[2],r=c.dataSync(),o=a.dataSync(),l=s.dataSync();U(r,o,l),b.b(e)}));case 6:o=requestAnimationFrame(F),R(o),b.d().endScope();case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(u.a)(j.a.mark((function e(){var t,n,c,s,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b.d().startScope(),t=a.inputs[0].shape.slice(1,3),n=Object(i.a)(t,2),c=n[0],s=n[1],r=b.h((function(){return b.e.resizeBilinear(b.a.fromPixels(A.current),[c,s]).div(255).expandDims(0)})),e.next=5,a.executeAsync(r).then((function(e){var t=e.slice(0,3),n=Object(i.a)(t,3),c=n[0],a=n[1],s=n[2],r=c.dataSync(),o=a.dataSync(),l=s.dataSync();E(r,o,l),b.b(e)}));case 5:b.d().endScope();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){e.setModelLoadingOn(),k({state:"loading",progress:0}),b.f("".concat(window.location.origin,"/face-mask-model_web_model/model.json"),{onProgress:function(e){k({state:"loading",progress:e})}}).then(function(){var t=Object(u.a)(j.a.mark((function t(n){var c;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=b.g(n.inputs[0].shape),t.next=3,n.executeAsync(c).then((function(t){b.b(t),b.b(c),s(n),e.setModelLoadingOff(),k({state:"ready",progress:1}),console.log("model loaded")}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),[]),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("div",{className:"Live",style:e.isModelLoading?{marginTop:"40px"}:{marginTop:"20px"},children:[Object(r.jsx)("div",{className:"title",id:"live",children:"Webcam"}),Object(r.jsx)("ul",{className:"webcam-ul",children:Object(r.jsx)("li",{children:"Test the model with your device's webcam"})}),Object(r.jsxs)("div",{className:"content",children:[Object(r.jsxs)("div",{className:"main",children:[Object(r.jsx)("video",{style:{display:"open"===d?"block":"none"},autoPlay:!0,playsInline:!0,muted:!0,ref:M,className:"main-video"}),Object(r.jsx)("canvas",{width:640,height:360,style:{display:"open"===d?"block":"none"},ref:I,className:"main-canvas"}),Object(r.jsx)("img",{width:360,height:360,className:"temp-img",style:{display:"open"===d?"none":"block"},src:"temp-webcam-img.jpg"})]}),Object(r.jsx)("div",{className:"btnWrapper",children:Object(r.jsxs)("button",{className:"open"===d?"active":"nonActive",onClick:function(){"close"===d?navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"environment"}}).then((function(e){window.localStream=e,M.current.srcObject=e,h("open"),M.current.onloadedmetadata=function(){F()}})):alert("Can't open Webcam!"):(cancelAnimationFrame(L),R(null),P())},disabled:"ready"!==N.state,children:["open"===d?"Close":"Activate"," Webcam"]})})]})]}),Object(r.jsxs)("div",{className:"image-container",id:"image",children:[Object(r.jsx)("div",{className:"title",children:"Image"}),Object(r.jsxs)("ul",{className:"webcam-ul",children:[Object(r.jsx)("li",{children:"Test the model out on an image from your system"}),Object(r.jsx)("li",{children:Object(r.jsx)("em",{children:"Webcam must be closed when predicting on an image"})})]}),Object(r.jsxs)("div",{className:"content",children:[Object(r.jsx)("img",{style:{display:"open"===v?"block":"none"},ref:A,className:"main-img"}),Object(r.jsx)("canvas",{style:{display:"open"===v?"block":"none"},width:360,height:360,ref:W,className:"main-canvas-img"}),Object(r.jsx)("img",{width:360,height:360,className:"temp-img",style:{display:"open"===v?"none":"block"},src:"temp-picture-img.jpg"}),Object(r.jsxs)("div",{className:"btnWrapper",children:[Object(r.jsx)("input",{type:"file",ref:T,accept:"image/*",style:{display:"none"},onChange:function(e){if(console.log("image opened"),null!==e.target.files[0]&&0!==e.target.files.length){var t=e.target.files[0],n=window.URL.createObjectURL(t);A.current.src=n,p("open"),console.log(v),A.current.onload=function(){_(),window.URL.revokeObjectURL(n)}}}}),Object(r.jsxs)("button",{className:"nonActive",disabled:"ready"!==N.state,onClick:function(){"open"===d&&P(),T.current.click()},children:["open"===v?"New":"Upload"," Image"]}),"open"===v?Object(r.jsx)("button",{className:"closeImage",onClick:function(){A.current.src?(A.current.src=null,p("close")):alert("No Image to close")},children:"Close Image"}):null]})]})]}),Object(r.jsx)("div",{className:"rest"})]})},f=n(326),O=n(44),v=(n(372),function(){var e=Object(c.useState)(!1),t=Object(i.a)(e,2),n=t[0],a=t[1];return Object(r.jsx)(f.a,{children:Object(r.jsxs)("div",{className:"App",id:"about",children:[Object(r.jsx)(o,{isModelLoading:n}),Object(r.jsxs)(O.c,{children:[Object(r.jsx)(O.a,{path:"/",element:Object(r.jsx)(l,{})}),Object(r.jsx)(O.a,{path:"/model",element:Object(r.jsx)(h,{isModelLoading:n,setModelLoadingOn:function(){a(!0)},setModelLoadingOff:function(){a(!1)}})})]})]})})});s.a.render(Object(r.jsx)(v,{}),document.getElementById("root"))}},[[373,1,2]]]);
//# sourceMappingURL=main.5a434206.chunk.js.map