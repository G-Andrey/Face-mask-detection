(this["webpackJsonpfront-end"]=this["webpackJsonpfront-end"]||[]).push([[0],{232:function(e){e.exports=JSON.parse('["mask","no_mask"]')},332:function(e,t,n){},334:function(e,t,n){},340:function(e,t){},341:function(e,t){},349:function(e,t){},359:function(e,t){},360:function(e,t){},361:function(e,t){},362:function(e,t){},370:function(e,t){},371:function(e,t,n){},372:function(e,t,n){},373:function(e,t,n){"use strict";n.r(t);var c=n(29),a=n(273),s=n.n(a),i=n(4),r=n(107),o=(n(332),n(26)),l=function(e){var t=Object(c.useState)(!1),n=Object(i.a)(t,2),a=n[0],s=n[1],l=Object(c.useState)(!0),d=Object(i.a)(l,2),u=(d[0],d[1]),j=function(){return s(!1)},b=function(){window.innerWidth<=960?u(!1):u(!0)};return Object(c.useEffect)((function(){b()}),[]),window.addEventListener("resize",b),Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)("nav",{className:"navbar",children:[Object(o.jsxs)("div",{className:"navbar-container",children:[Object(o.jsx)(r.b,{to:"/",className:"navbar-logo",onClick:j,children:Object(o.jsx)("i",{className:"fas fa-head-side-mask"})}),Object(o.jsx)("div",{className:"menu-icon",onClick:function(){return s(!a)},children:Object(o.jsx)("i",{className:a?"fas fa-times":"fas fa-bars"})}),Object(o.jsxs)("ul",{className:a?"nav-menu active":"nav-menu",children:[Object(o.jsx)("li",{className:"nav-item",children:Object(o.jsx)(r.b,{to:"/",className:"nav-links",onClick:j,children:"About"})}),Object(o.jsx)("li",{className:"nav-item",children:Object(o.jsx)(r.b,{to:"/model#",className:"nav-links",onClick:j,children:"Live"})}),Object(o.jsx)("li",{className:"nav-item",children:Object(o.jsx)(r.b,{to:"/model#image",className:"nav-links",onClick:j,children:"Image"})})]})]}),e.isModelLoading?Object(o.jsx)("div",{className:"loader-container",children:Object(o.jsx)("p",{children:"Loading model"})}):null]})})},d=(n(334),function(){return Object(o.jsxs)("div",{style:{height:"100vh",backgroundColor:"#2d3748"},children:[Object(o.jsx)("div",{className:"hero-container",children:Object(o.jsx)("video",{src:"/videos/video-2.mp4",autoPlay:!0,loop:!0,muted:!0,className:"hero-video"})}),Object(o.jsxs)("div",{className:"about-container",children:[Object(o.jsx)("div",{className:"title",children:"About the Model"}),Object(o.jsxs)("ul",{className:"body",children:[Object(o.jsx)("li",{children:"This computer vision model was trained to detect and classify whether a human is wearing a mask or not with bounding box annotations"}),Object(o.jsx)("li",{children:"As such, the model contains two classes: mask and no_mask. Each prediction is displayed with it's corresponding confidence threshold [25%-100%]"}),Object(o.jsx)("li",{children:"Trained on the YoloV5 architecture using transfer learning from the YoloV5s model"}),Object(o.jsx)("li",{children:"Trained via Google Colab using a P100 GPU taking 3.5 hours"}),Object(o.jsx)("li",{children:"Trained on over 2,700 images containing over 3,000 annotations"}),Object(o.jsx)("li",{children:"Model was tested on 680 validation images that were withheld from the training set"}),Object(o.jsx)("li",{children:"Achieved 88% precision and 89% recall when tested on the validation images"})]}),Object(o.jsx)("div",{className:"about-btn-container",children:Object(o.jsx)(r.b,{to:"/model",children:Object(o.jsx)("button",{className:"about-btn",children:"Test the model"})})})]})]})}),u=n(5),j=n.n(u),b=n(11),m=n(67),h=(n(208),n(232));n(371);m.c();var f=function(e){var t=Object(c.useState)(null),n=Object(i.a)(t,2),a=n[0],s=n[1],r=Object(c.useState)("close"),l=Object(i.a)(r,2),d=l[0],u=l[1],f=Object(c.useState)("close"),O=Object(i.a)(f,2),v=O[0],p=O[1],x=Object(c.useState)({state:"loading",progress:0}),g=Object(i.a)(x,2),w=g[0],y=g[1],N=Object(c.useState)(null),k=Object(i.a)(N,2),S=k[0],C=k[1],L=Object(c.useRef)(null),R=Object(c.useRef)(null),T=Object(c.useRef)(null),A=Object(c.useRef)(null),M=Object(c.useRef)(null),I=function(){T.current.srcObject?(T.current.srcObject=null,window.localStream.getTracks().forEach((function(e){e.stop()})),u("close")):alert("Please open Webcam first!")},W=function(e,t,n){var c=A.current.getContext("2d");c.clearRect(0,0,c.canvas.width,c.canvas.height);var a="16px sans-serif";c.font=a,c.textBaseline="top";for(var s=0;s<t.length;++s)if(t[s]>.25){var r=h[n[s]],o=(100*t[s]).toFixed(1),l=e.slice(4*s,4*(s+1)),d=Object(i.a)(l,4),u=d[0],j=d[1],b=d[2],m=d[3];u*=A.current.width,b*=A.current.width,j*=A.current.height;var f=b-u,O=(m*=A.current.height)-j,v="no_mask"==r?"#fc031c":"#03fc0b";c.strokeStyle=v,c.lineWidth=2,c.strokeRect(u,j,f,O),c.fillStyle=v;var p=c.measureText(r+" - "+o+"%").width,x=parseInt(a,10);c.fillRect(u-1,j-(x+2),p+2,x+2),c.fillStyle="#ffffff",c.fillText(r+" - "+o+"%",u-1,j-(x+2))}},P=function(e,t,n){var c=M.current.getContext("2d");c.clearRect(0,0,c.canvas.width,c.canvas.height);var a="16px sans-serif";c.font=a,c.textBaseline="top";for(var s=0;s<t.length;++s)if(t[s]>.25){var r=h[n[s]],o=(100*t[s]).toFixed(1),l=e.slice(4*s,4*(s+1)),d=Object(i.a)(l,4),u=d[0],j=d[1],b=d[2],m=d[3];u*=M.current.width,b*=M.current.width,j*=M.current.height;var f=b-u,O=(m*=M.current.height)-j,v="no_mask"==r?"#fc031c":"#03fc0b";c.strokeStyle=v,c.lineWidth=2,c.strokeRect(u,j,f,O),c.fillStyle=v;var p=c.measureText(r+" - "+o+"%").width,x=parseInt(a,10);c.fillRect(u-1,j-(x+2),p+2,x+2),c.fillStyle="#ffffff",c.fillText(r+" - "+o+"%",u-1,j-(x+2))}},U=function(){var e=Object(b.a)(j.a.mark((function e(){var t,n,c,s,r,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!T.current.srcObject){e.next=9;break}return m.d().startScope(),t=a.inputs[0].shape.slice(1,3),n=Object(i.a)(t,2),c=n[0],s=n[1],r=m.h((function(){return m.e.resizeBilinear(m.a.fromPixels(T.current),[c,s]).div(255).expandDims(0)})),e.next=6,a.executeAsync(r).then((function(e){var t=e.slice(0,3),n=Object(i.a)(t,3),c=n[0],a=n[1],s=n[2],r=c.dataSync(),o=a.dataSync(),l=s.dataSync();W(r,o,l),m.b(e)}));case 6:o=requestAnimationFrame(U),C(o),m.d().endScope();case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(b.a)(j.a.mark((function e(){var t,n,c,s,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m.d().startScope(),t=a.inputs[0].shape.slice(1,3),n=Object(i.a)(t,2),c=n[0],s=n[1],r=m.h((function(){return m.e.resizeBilinear(m.a.fromPixels(R.current),[c,s]).div(255).expandDims(0)})),e.next=5,a.executeAsync(r).then((function(e){var t=e.slice(0,3),n=Object(i.a)(t,3),c=n[0],a=n[1],s=n[2],r=c.dataSync(),o=a.dataSync(),l=s.dataSync();P(r,o,l),m.b(e)}));case 5:m.d().endScope();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){e.setModelLoadingOn(),y({state:"loading",progress:0}),m.f("".concat(window.location.origin,"/face-mask-model_web_model/model.json"),{onProgress:function(e){y({state:"loading",progress:e})}}).then(function(){var t=Object(b.a)(j.a.mark((function t(n){var c;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=m.g(n.inputs[0].shape),t.next=3,n.executeAsync(c).then((function(t){m.b(t),m.b(c),s(n),e.setModelLoadingOff(),y({state:"ready",progress:1}),console.log("model loaded")}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),[]),Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("div",{className:"Live",style:e.isModelLoading?{marginTop:"40px"}:{marginTop:"20px"},children:[Object(o.jsx)("div",{className:"title",id:"live",children:"Webcam"}),Object(o.jsx)("ul",{className:"webcam-ul",children:Object(o.jsx)("li",{children:"Test the model with your device's webcam"})}),Object(o.jsxs)("div",{className:"content",children:[Object(o.jsxs)("div",{className:"main",children:[Object(o.jsx)("video",{style:{display:"open"===d?"block":"none"},autoPlay:!0,playsInline:!0,muted:!0,ref:T,className:"main-video"}),Object(o.jsx)("canvas",{width:640,height:360,style:{display:"open"===d?"block":"none"},ref:A,className:"main-canvas"}),Object(o.jsx)("img",{width:360,height:360,className:"temp-img",style:{display:"open"===d?"none":"block"},src:"temp-webcam-img.jpg"})]}),Object(o.jsx)("div",{className:"btnWrapper",children:Object(o.jsxs)("button",{className:"open"===d?"active":"nonActive",onClick:function(){"close"===d?navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"environment"}}).then((function(e){window.localStream=e,T.current.srcObject=e,u("open"),T.current.onloadedmetadata=function(){U()}})):alert("Can't open Webcam!"):(cancelAnimationFrame(S),C(null),I())},disabled:"ready"!==w.state,children:["open"===d?"Close":"Activate"," Webcam"]})})]})]}),Object(o.jsxs)("div",{className:"image-container",id:"image",children:[Object(o.jsx)("div",{className:"title",children:"Image"}),Object(o.jsxs)("ul",{className:"webcam-ul",children:[Object(o.jsx)("li",{children:"Test the model out on an image from your system"}),Object(o.jsx)("li",{children:Object(o.jsx)("em",{children:"Webcam must be closed when predicting on an image"})})]}),Object(o.jsxs)("div",{className:"content",children:[Object(o.jsx)("img",{style:{display:"open"===v?"block":"none"},ref:R,className:"main-img"}),Object(o.jsx)("canvas",{style:{display:"open"===v?"block":"none"},width:360,height:360,ref:M,className:"main-canvas-img"}),Object(o.jsx)("img",{width:360,height:360,className:"temp-img",style:{display:"open"===v?"none":"block"},src:"temp-picture-img.jpg"}),Object(o.jsxs)("div",{className:"btnWrapper",children:[Object(o.jsx)("input",{type:"file",ref:L,accept:"image/*",style:{display:"none"},onChange:function(e){if(console.log("image opened"),null!==e.target.files[0]&&0!==e.target.files.length){var t=e.target.files[0],n=window.URL.createObjectURL(t);R.current.src=n,p("open"),console.log(v),R.current.onload=function(){E(),window.URL.revokeObjectURL(n)}}}}),Object(o.jsxs)("button",{className:"nonActive",disabled:"ready"!==w.state,onClick:function(){"open"===d&&I(),L.current.click()},children:["open"===v?"New":"Upload"," Image"]}),"open"===v?Object(o.jsx)("button",{className:"closeImage",onClick:function(){R.current.src?(R.current.src=null,p("close")):alert("No Image to close")},children:"Close Image"}):null]})]})]}),Object(o.jsx)("div",{className:"rest"})]})},O=n(44),v=(n(372),function(){var e=Object(c.useState)(!1),t=Object(i.a)(e,2),n=t[0],a=t[1];return Object(o.jsxs)("div",{className:"App",id:"about",children:[Object(o.jsx)(l,{isModelLoading:n}),Object(o.jsxs)(O.c,{children:[Object(o.jsx)(O.a,{path:"/",element:Object(o.jsx)(d,{})}),Object(o.jsx)(O.a,{path:"/model",element:Object(o.jsx)(f,{isModelLoading:n,setModelLoadingOn:function(){a(!0)},setModelLoadingOff:function(){a(!1)}})})]})]})});s.a.render(Object(o.jsx)(r.a,{children:Object(o.jsx)(v,{})}),document.getElementById("root"))}},[[373,1,2]]]);
//# sourceMappingURL=main.e1af7d2f.chunk.js.map